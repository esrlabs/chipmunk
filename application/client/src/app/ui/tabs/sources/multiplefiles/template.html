<div class="preset-container" appMatDragDropFileFeature (dropped)="ngOnDrop($event)">
    <div class="preset-container-content">
        <div class="left">
            <mat-card class="top">
                <mat-card-title>Multiple files</mat-card-title>
                <mat-card-content>
                    <app-tabs-source-multiplefiles-structure
                                                                (context)="ngOnContext($event)"
                                                                [files]="state.files"
                                                                [filesUpdate]="filesUpdate"
                                                                [searchUpdate]="state.searchUpdate">
                    </app-tabs-source-multiplefiles-structure>
                    <div class="filter t-medium" [class]="filter.value() !== '' ? '' : 'hidden'">{{filter.value()}}</div>
                </mat-card-content>
            </mat-card>
        </div>
        <div class="right">
            <mat-card>
                <mat-card-title>Summary</mat-card-title>
                <mat-card-content>
                    <table>
                        <tr>
                            <td>File count:</td>
                            <td>{{state.files.length}}</td>
                        </tr>
                        <tr>
                            <td>Selected file count:</td>
                            <td>{{state.selectedCount}}</td>
                        </tr>
                        <tr>
                            <td>New size:</td>
                            <td>{{state.selectedSize}}</td>
                        </tr>
                        <!--<tr>
                            <td>Destination:</td>
                            <td (click)="ngOnDestination()">{{ngDestination}}</td>
                            <td>TODO</td> Destination path - Clickable to open folder selector
                        </tr>-->
                    </table>
                </mat-card-content>
            </mat-card>
            <mat-card>
                <mat-card-title>Search</mat-card-title>
                <mat-card-content>
                    <mat-form-field class="outline" appearance="outline">
                        <input 
                            #searchInput
                            matInput
                            tabindex="1000"
                            type="text"
                            placeholder="Search in files"
                            aria-label="Filter"
                            [formControl]="state.input.control"
                            (focus)="ngOnSearchFocus(true)"
                            (blur)="ngOnSearchFocus(false)"
                            (keyup)="state.onKeyup($event)"
                        />
                    </mat-form-field>
                    <mat-spinner *ngIf="state.input.searching" [diameter]="20"></mat-spinner>
                </mat-card-content>
            </mat-card>
            <mat-card>
                <mat-card-title>Warnings / Errors</mat-card-title>
                <mat-card-content>
                    <p [class]="state.openable ? 'hidden' : ''">Opening dlt/pcap with default settings not supported yet</p>
                    <p [class]="state.concatable ? 'hidden' : ''">Concatenation of specified file types not supported yet</p>
                </mat-card-content>
            </mat-card>
            <div class="spacer"></div>
            <mat-card class="controls">
                <mat-card-title>Actions</mat-card-title>
                <mat-card-content>
                    <button mat-stroked-button (click)="ngOpenEach()" [disabled]="!state.openable">Open each</button>
                    <button mat-stroked-button (click)="ngConcat()" [disabled]="!state.concatable">Concat</button>
                    <button mat-stroked-button (click)="ngCancel()">Cancel</button>
                </mat-card-content>
            </mat-card>
        </div>
    </div>
</div>
