<div class="preset-container">
    <div class="preset-container-content">
        <div class="left">
            <mat-card class="top">
                <mat-card-title>Connection</mat-card-title>
                <mat-card-content>
                    <mat-form-field class="full-width">
                        <input matInput placeholder="Preset name" [(ngModel)]="state.ecu" [errorStateMatcher]="state.errors.ecu">
                        <mat-error *ngIf="state.errors.ecu.getErrorCode() === 'INVALID'">
                            Use can use not more 255 symbols
                        </mat-error>
                        <mat-error *ngIf="state.errors.ecu.getErrorCode() === 'REQUIRED'">
                           <strong>required</strong>
                        </mat-error>
                    </mat-form-field>
                    <app-transport [state]="state.transport"></app-transport>
                </mat-card-content>
            </mat-card>
            <mat-card class="fill sticky">
                <mat-card-title>Recent</mat-card-title>
                <mat-card-subtitle>Recently created connections</mat-card-subtitle>
                <mat-card-content>
                    <p class="t-medium">No recent connections</p>
                </mat-card-content>
            </mat-card>
        </div>
        <div class="right">
            <mat-card>
                <mat-card-title>Log level</mat-card-title>
                <mat-card-content>
                    <mat-form-field appearance="legacy">
                        <mat-label>Select required level of logs</mat-label>
                        <mat-select [(ngModel)]="state.logLevel">
                          <mat-option *ngFor="let logLevel of logLevels" [value]="logLevel.value">
                            {{logLevel.caption}}
                          </mat-option>
                        </mat-select>
                    </mat-form-field>
                </mat-card-content>
            </mat-card>
            <mat-card>
                <mat-card-title>Fibex</mat-card-title>
                <mat-card-subtitle>Attach fibex file (optional)</mat-card-subtitle>
                <mat-card-content>
                    <div class="fibex" *ngIf="state.fibex.length > 0">
                        <mat-chip-list aria-label="Fibex files">
                            <mat-chip *ngFor="let file of state.fibex" (removed)="ngOnRemoveFibex(file)">
                                {{file.name}}
                                <button matChipRemove>
                                  <mat-icon>cancel</mat-icon>
                                </button>
                            </mat-chip>
                        </mat-chip-list>
                    </div>    
                    <mat-divider class="fibex-divider" *ngIf="state.fibex.length > 0"></mat-divider>
                    <div class="fibex-controlls">
                        <button mat-stroked-button (click)="ngOnFibexAdd()">
                            <mat-icon aria-hidden="false" class="mini-button">note_add</mat-icon>
                            Add
                        </button>
                    </div>
                </mat-card-content>
            </mat-card>
            <mat-card>
                <mat-card-title>Timezone</mat-card-title>
                <mat-card-subtitle>Select required timezone (optional). UTC is default</mat-card-subtitle>
                <mat-card-content>
                    <span *ngIf="state.timezone !== undefined">
                        {{state.timezone.name}} ({{state.timezone.utc}})
                    </span>
                    <div class="controlls">
                        <button mat-stroked-button (click)="ngTimezoneSelect()">Select</button>
                    </div>
                </mat-card-content>
            </mat-card>
            <div class="spacer"></div>
            <mat-card class="controlls">
                <mat-card-title>Actions</mat-card-title>
                <mat-card-content>
                  <button class="major-button" mat-stroked-button (click)="ngOnConnect()">Connect</button>
                  <button mat-stroked-button (click)="ngOnClose()">Cancel</button>
                </mat-card-content>
            </mat-card>
        </div>
    </div>
</div>