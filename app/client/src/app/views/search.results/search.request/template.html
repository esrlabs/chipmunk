<div class="request">
    <common-input #input [type]="type" [value]="value" [placeholder]="placeholder" [handles]="handles" [preventUpDown]="true"></common-input>
    <div class="buttons">
        <div *ngIf="getActiveExtraButton() === null" [attr.class]="'icon icon-2x2 ' + (mode === 'reg' ? 'active' : '')" (click)="onModeReg()" title="Turn on/off regular expression"><span class="fa fa-free-code-camp"></span></div>
        <div *ngIf="getActiveExtraButton() === null" [attr.class]="'icon icon-2x2 ' + (autoplay ? 'active' : '')" (click)="onAutoPlay()"><span class="fa fa-play" title="Automatically apply filter (without ENTER): on/off"></span></div>
        <div *ngIf="getActiveExtraButton() === null" [attr.class]="'icon icon-2x2 ' + (lastRequest !== null ? 'active' : '')" (click)="onAddRequest()"><span class="fa fa-plus" title="Save filter"></span></div>
        <div *ngIf="getActiveExtraButton() === null" [attr.class]="'icon icon-2x2 ' + (lastRequest !== null ? 'active' : '')" (click)="onDropRequest()"><span class="fa fa-times-circle-o" title="Drop filter"></span></div>
        <div *ngFor="let button of extraButtons; let i = index;"
             [attr.class]="'icon icon-2x2 '+ (button.active ? 'active' : '')"
             (click)="onExtraButtonClick($event, button.id)"><span [attr.class]="'fa ' + button.icon" [attr.title]="button.title"></span>
        </div>
    </div>
    <div class="progress" *ngIf="inprogress"><progressbar-line></progressbar-line></div>
    <div class="history-popup-wrapper" *ngIf="historyOffers.length > 1" [style.marginLeft]="historyPopupOffset + 'px'">
        <ul class="history-popup">
            <li *ngFor="let item of historyOffers; let i = index;"
                [attr.class]="historySelected === i ? 'selected' : ''"
                (click)="onHistoryItemSelect(i)"><span>{{item.input}}</span><span>{{item.rest}}</span></li>
        </ul>
        <span class="history-drop-history" (click)="onDropHistory()">Drop</span>
    </div>

</div>