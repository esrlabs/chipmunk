import socket
import time

PACKETS = [
    # 10 Request 
    bytes([8, 210, 155, 246, 172, 2, 18, 8, 72, 101, 108, 108, 111, 49, 50, 51, 24, 177, 208, 133, 243, 3]),
    bytes([8, 199, 198, 229, 140, 4, 18, 7, 84, 101, 115, 116, 79, 110, 101, 24, 174, 141, 244, 172, 5]),
    bytes([8, 253, 211, 159, 158, 11, 18, 8, 80, 105, 65, 112, 112, 114, 111, 120, 24, 212, 184, 141, 210, 10]),
    bytes([8, 0, 18, 5, 69, 109, 112, 116, 121, 24, 0]),
    bytes([8, 42, 18, 10, 84, 104, 101, 32, 97, 110, 115, 119, 101, 114, 24, 218, 178, 159, 168, 15]),
    bytes([8, 207, 240, 229, 216, 11, 18, 5, 66, 105, 103, 73, 68, 24, 248, 151, 165, 217, 13]),
    bytes([8, 123, 18, 5, 83, 104, 111, 114, 116, 24, 200, 3]),
    bytes([8, 234, 133, 226, 148, 18, 9, 82, 97, 110, 100, 111, 109, 83, 116, 114, 24, 149, 138, 239, 58]),
    bytes([8, 187, 168, 211, 176, 2, 18, 6, 77, 105, 100, 100, 108, 101, 24, 218, 206, 143, 179, 3]),
    bytes([8, 205, 241, 202, 170, 3, 18, 5, 76, 117, 99, 107, 121, 24, 221, 183, 197, 138, 12]),

    # 10 Response 
    bytes([8, 209, 134, 149, 139, 5, 18, 9, 72, 101, 108, 108, 111, 82, 101, 115, 112, 24, 149, 138, 239, 58, 34, 4, 222, 173, 190, 239]),
    bytes([8, 199, 198, 229, 140, 4, 18, 12, 84, 101, 115, 116, 82, 101, 115, 112, 111, 110, 115, 101, 24, 174, 141, 244, 172, 5, 34, 3, 1, 2, 3]),
    bytes([8, 253, 211, 159, 158, 11, 18, 10, 80, 105, 82, 101, 115, 112, 111, 110, 115, 101, 24, 212, 184, 141, 210, 10, 34, 2, 255, 238]),
    bytes([8, 0, 18, 9, 69, 109, 112, 116, 121, 82, 101, 115, 112, 24, 0, 34, 0]),
    bytes([8, 42, 18, 10, 84, 104, 101, 32, 97, 110, 115, 119, 101, 114, 24, 218, 178, 159, 168, 15, 34, 5, 16, 32, 48, 64, 80]),
    bytes([8, 207, 240, 229, 216, 11, 18, 11, 66, 105, 103, 82, 101, 115, 112, 111, 110, 115, 101, 24, 248, 151, 165, 217, 13, 34, 3, 170, 187, 204]),
    bytes([8, 123, 18, 9, 83, 104, 111, 114, 116, 82, 101, 115, 112, 24, 200, 3, 34, 1, 0]),
    bytes([8, 234, 133, 226, 148, 18, 14, 82, 97, 110, 100, 111, 109, 82, 101, 115, 112, 111, 110, 115, 101, 24, 149, 138, 239, 58, 34, 2, 222, 173]),
    bytes([8, 187, 168, 211, 176, 2, 18, 10, 77, 105, 100, 100, 108, 101, 82, 101, 115, 112, 24, 218, 206, 143, 179, 3, 34, 4, 254, 237, 250, 206]),
    bytes([8, 205, 241, 202, 170, 3, 18, 9, 76, 117, 99, 107, 121, 82, 101, 115, 112, 24, 221, 183, 197, 138, 12, 34, 3, 17, 34, 51]),
]


HOST = '127.0.0.1'
PORT = 8889    

def run_server():
    with socket.socket(socket.AF_INET, socket.SOCK_STREAM) as server_sock:
        server_sock.bind((HOST, PORT))
        server_sock.listen(1)
        print(f"Server listening on {HOST}:{PORT}")
        
        conn, addr = server_sock.accept()
        with conn:
            print(f"Connected by {addr}")
            while True:
                for packet in PACKETS:
                    try:
                        conn.sendall(packet)
                        print(f"Sent packet: {packet.hex()}")
                    except Exception as e:
                        print(f"Error sending packet: {e}")
                        return
                    time.sleep(1)

if __name__ == '__main__':
    run_server()
